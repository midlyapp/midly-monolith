generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
  moduleFormat = "cjs"
}

datasource db {
  provider = "postgresql"
}




model User {
  id         String   @id @default(nanoid())
  email      String?  @unique
  phone      String?  @unique
  name       String?
  surname    String?
  avatarUrl  String?    @map("avatar_url")
  isActive   Boolean  @default(true)

  isPhoneVerified Boolean  @default(false) @map("is_phone_verified")
  isEmailVerified Boolean  @default(false) @map("is_email_verified")

  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  Accounts   Account[]
  Password   Password?
}

model Account {
  id             String   @id @default(nanoid())
  userId         String 
  provider       String
  providerUserId String
  email          String?
  phone          String?
  scope          String?  // e.g., "email,phone,name"
  data           Json?    // raw provider data (email_verified, phone_verified, etc.)
  createdAt      DateTime @default(now())

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@unique([provider, providerUserId])
}

model Password {
  userId       String   @id
  passwordHash String
  algorithm    String   @default("argon2id")
  updatedAt    DateTime @updatedAt

  user User @relation(fields: [userId], references: [id], onDelete: Cascade)
}
